Автор: Федосеев Михаил В. РИС-22-4
# Торговый журнал трейдера
### Содержание

1. [Функциональные требования](#функциональные-требования).
2. [Нефункциональные требования](#нефункциональные-требования).
3. [Варианты использования](#use-cases).
4. [С4 уровень системного контекста](#диаграмма-системного-контекста).
5. [С4 уровень контейнеров](#диаграмма-контейнеров).
6. [С4 уровень компонентов](#диаграмма-компонентов).

---
### Функциональные требования
---
1. Система должна позволять создавать, изменять, удалять и просматривать сделки. Сделка должна содержать следующую информацию:
	1. Время открытия сделки
	2. Время закрытия сделки
	3. Цена входа в сделку
	4. Цена выхода из сделки
	5. Комиссия
	6. Стоп-лосс (в пунктах)
	7. Риск (в % от текущего размера депозита)
	8. Прибыль к текущему размеру депозита
	9. Сумма прибыли
	
	Сделка также может содержать следующую информацию:
	1. Оценка сделки (на выбор из предоставленных: отлично, неверный план, ранний вход, поздний вход, ранний выход, поздний выход, нарушение плана, системный стоп, прочее)
	2. Алгоритм входа
	3. Описание сопровождения
	4. Обоснование уровня стоп-лосс
	5. Описание хода сделки
	6. Разбор ошибок
	7. Заметки, комментарии
	8. Скриншоты сделки
2. Система должна позволять просматривать статистику сделок: 
	1. суммарную прибыль
	2. убытки за выбранный промежуток времени
	3. % прибыльных от всех совершенных сделок
	4. отношение риска к прибыли по всем сделкам
	5. % роста депозита за все время и за выбранный промежуток
3. Статистика пользователя должна выводиться в виде графиков и диаграмм
4. Система должна позволять управлять учётной записью пользователя
5. Система должна позволять делать импорт сделок из терминала Meta Trader 5 и крипто бирж (Bybit, Binance, Bitstamp). Для импорта требуется следующая информация о сделке:
	1. Время открытия сделки
	2. Время закрытия сделки
	3. Цена входа в сделку
	4. Цена выхода из сделки
	5. Комиссия
	6. Стоп-лосс (в пунктах)
	7. Скриншот сделки из терминала
6. Система должна предоставлять доступ к данным извне
7. Система должна создавать резервные копии данных.
8. Система должна позволять добавлять алгоритмы входа трейдера, просматривать по ним статистику.
### Нефункциональные требования
---
1. Клиентское приложение должно корректно функционировать на операционных системах Windows 10+, macOS 12+ и Ubuntu 20.04 LTS+.
2. Интерфейс системы должен корректно отображаться и быть функциональным на разрешениях экрана от 720px (мобильные устройства) до 3840px (десктопы).
3. Интерфейс системы должен поддерживать русский, английский, белорусский, украинский, казахский, киргизский, азербайджанский, армянский, таджикский, туркменский языки. Переключение между языками должно происходить без перезагрузки приложения.
4. Система должна предоставлять пользователю возможность выбора между светлой и тёмной темой оформления. Выбранная тема должна сохраняться между сеансами.
5. Все пароли должны хешироваться с использованием алгоритма bcrypt. Сессии должны быть защищены от hijacking.
6. Система должна выдерживать одновременную работу до 5000 пользователей.
### Стейкхолдеры
---
1. Трейдер - лицо, занимающееся спекулятивной торговлей на бирже.
### Use Cases
---
> Добавить сделку (ручной способ)
> 1. Пользователь выбирает торговый журнал с ручным вводом.
> 2. Пользователь вводит основные данные о сделке - пара, позиция, сессия, объем, цена открытия и закрытия сделки, комиссия и стоп-лосс, выбирает способ входа и оценивает сделку. Некоторые поля высчитываются автоматически - риск, % прибыли / убытка, итог по сделке, результат сделки (+ или -), сумму тиков и сколько всего получено по сделке до вычета комиссий и т.д.
> 3. Пользователь добавляет дополнительные данные - кондиции для входа: гипотезу, торговый план, вход, стоп-лосс, тейк-профит, реализацию сделки. Может оставить заметку о входе. Может расписать разбор ошибок.

<img width="525" height="373" alt="image" src="https://github.com/user-attachments/assets/87207c22-0a55-4de1-8946-b6b8a480d45d" />

> Добавить сделку (автоматический способ)
> 1. Пользователь совершает сделку в торговом терминале.
> 2. Сделка автоматически отправляется в систему.
> 3. Пользователь открывает сделку и дозаполняет недостающие данные (алгоритм входа)

<img width="891" height="373" alt="image" src="https://github.com/user-attachments/assets/bdcb3dfd-bdac-42ad-bf00-a095de90f5be" />

> Настроить экран статистики
> 1. Выбрать торговые журналы для подсчёта статистики.
> 2. Выбрать показатели для отображения.
> 3. Выбрать графики для отображения.

>Посмотреть общую статистику торговли
>1. Пользователь открывает раздел "Статистика"
>2. Пользователь видит следующую статистику: 
>	1. P&L по выбранным журналам.
>	2. Изменение депозита(-ов) в % соотношении.
>	3. Отношение прибыльных сделок к остальным (Winrate).
>	4. График изменения депозита по выбранным единицам (месяцам, неделям, дням).
>	5. Список своих входов со статистикой (% прибыльных сделок к остальным).

> Добавить журнал
> 1. Пользователь переходит в управление журналами.
> 2. Пользователь добавляет журнал. Указывает следующую информацию: 
> 	1. Название журнала
> 	2. Способ добавления сделок (ручной, автоматический). При автоматическом способе выбирает источник.
> 	3. Размер депозита. После ввода размера депозита изменять его можно только через функции ("Указать добавление средств" и "Указать вывод средств").

> Посмотреть статистику по журналу
> 1. Пользователь открывает страницу "Журналы".
> 2. Пользователь выбирает необходимый журнал.
> 3. Пользователь видит следующую статистику:
> 	1. P&L по выбранным журналам.
> 	2. Изменение депозита(-ов) в % соотношении.
> 	3. Отношение прибыльных сделок к остальным (Winrate).
> 	4. График изменения депозита по выбранным единицам (месяцам, неделям, дням).

> Посмотреть список входов
> 1. Пользователь открывает страницу вариантов входов.
> 2. Пользователь видит список входов.

> Добавить вариант входа
> 1. Пользователь переходит на страницу алгоритмов.
> 2. Пользователь добавляет алгоритм входа (описание по пунктам, изображения).

<img width="566" height="801" alt="image" src="https://github.com/user-attachments/assets/4fd95194-388e-4607-8c1b-7c288c40cf7d" />

### C4
---

#### Диаграмма системного контекста
<img width="651" height="421" alt="C4 System context drawio" src="https://github.com/user-attachments/assets/41c4e9bc-883f-4e8a-8f93-7c6377f72df9" />

#### Диаграмма контейнеров
<img width="2171" height="1175" alt="C4 Containers drawio" src="https://github.com/user-attachments/assets/2ed963db-779f-4dc5-83a9-4a37b3721670" />

#### Диаграмма компонентов
<img width="1691" height="1511" alt="C4 Components Auth drawio" src="https://github.com/user-attachments/assets/eeda6a25-c925-46c6-9dae-01500a5a48b6" />

<img width="1321" height="1481" alt="C4 Components Journal drawio" src="https://github.com/user-attachments/assets/41596d35-4cc9-43c0-8dba-18e39320c429" />
